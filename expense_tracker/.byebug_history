ledger.expenses_on('2017-06-11')
ledger.expenses_on('2017-06-10')
result_2
result_2.expense_id
result_1.expense_id
exit
expense_1
exit
expense_1
exit
last_response.body
post_expense_xml(expense)
result.error_message
exit
result.error_message
post_expense_xml(expense)
result.error_message
last_response.body
expense
exit
create_xml(@ledger.expenses_on(params[:date]))
exit
@ledger.expenses_on(params[:date])
exit
xml
exit
create_xml(@ledger.expenses_on(params[:date]))
exit
last_response.status
expense
exit
post '/expenses', JSON.generate(expense)
expense
last_response.status
exit
last_response.status
n
exit
last_response.status
exit
last_response.status
expense
exit
@ledger.expenses_on(params[:date])
@ledger.expenses_on(params[:date]))
exit
expenses
exit
last_response.body
expenses
exit
expense.merge('id' => parsed['expense_id'])
exit
expense.merge('id' => parsed['expense_id'])
parsed
exit
expense.merge('id' => parsed['expense_id'])
parsed
expense_id
expense
exit
coffee
exit
coffee
exit
    )
      'date'   => '2017-06-10'
      'amount' => '5.75',
      'payee'  => 'Starbucks',
coffee = post_expense_xml(
expense
exit
expense
exit
xml
exit
x
exit
x
exit
end
n
xml
exit
expenses
exit
n
expenses
exit
n
last_response
exit
n
expenses
exit
expenses
exit
parsed
n
parsed
n
xml
n
nn
n
s
n
post '/expenses', xml
xml
exit
xml
exit
post_expense_xml(coffee)
coffee = {'payee'  => 'Starbucks', 'amount' => '5.75', 'date'   => '2017-06-10'}
      'date'   => '2017-06-10'
      'amount' => '5.75',
coffee = {'payee'  => 'Starbucks',
post_expense_xml(coffee)
xml
exit
xml
exit
xml
exit
expense.key?('payee')
result
expense
exit
expense
n
s
expense
e
n
expense.is_a? Hash
expense
continue
Ox.dump xml, mode: :hash
Ox.load xml, mode: :hash
xml
xml = expenses.inject(doc) {|acc, exp| acc << Ox::Element.new(exp) }
expenses.inject(doc) do |stuff, expense|
expenses = @ledger.expenses_on(params[:date])
doc = Ox::Document.new(:version => '1.0')
@ledger.expenses_on(params[:date]).class
@ledger.expenses_on(params[:date])
@ledger.expenses_on(params[:date]).to_h
puts @ledger.expenses_on(params[:date])
@ledger.expenses_on(params[:date])
@ledger
